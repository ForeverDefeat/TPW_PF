frontend
python -m http.server 3000
backend
node server.js

administrador:
user: admin@turismo.com
password: 1234
usuarios
user: juan@example.com 
password: 1234
user: maria@example.com 
password: abcd

prompt:



inicializacion backend

consideraciones: se debe tener instalado node.js y python

1. tener carpeta backend
    TPW_Avance3/
    | ->   frontend/
    | ->    backend/
 2. abir cmd en esta carpeta o navegar hasta esta:
        \TPW_Avance3\backend>
        ejecutar el siguiente comando:
        npm install express mysql2 cors dotenv  express-validator
        npm install swagger-ui-express swagger-jsdoc
        npm install multercd

4. en mySQL 

    inicializar un base de datos:

        create database turismo_db

    tablas y datos:

        CREATE TABLE users (
        id INT PRIMARY KEY AUTO_INCREMENT,
        fullName VARCHAR(100),
        email VARCHAR(100) UNIQUE,
        password VARCHAR(100),
        role ENUM('user','admin') DEFAULT 'user'
        );

        CREATE TABLE destinations (
            id INT PRIMARY KEY AUTO_INCREMENT,
            name VARCHAR(100),
            category VARCHAR(100),
            description TEXT,
            imageUrl VARCHAR(300)
        );

        INSERT INTO users (fullName, email, password, role)
            VALUES ('Admin', 'admin@turismo.com', '1234', 'admin');

        INSERT INTO users (full_name, email, password, role) VALUES 
            ('Juan Pérez', 'juan@example.com', '1234', 'user'),
            ('María Torres', 'maria@example.com', 'abcd', 'user');



        INSERT INTO destinations (name, category, description, imageUrl) VALUES
            ('Playa Roja - Natural', 'playa',
            'Famosa por su arena rojiza y paisajes únicos dentro de la Reserva de Paracas.',
            'assets/playa1.png'),

            ('La Mina - Familiar', 'playa',
            'Ideal para nadar y disfrutar en familia con aguas tranquilas y claras.',
            'assets/playa2.png'),

            ('El Silencio - Aventura', 'playa',
            'Con olas grandes, es perfecta para practicar surf y deportes acuáticos.',
            'assets/playa3.png'),

            ('Playa Blanca - Relax', 'playa',
            'Con arena blanca y un ambiente tranquilo para descansar y relajarse.',
            'assets/playa4.png');

            ('Montaña Colorada', 'montana',
                'Formaciones rocosas rojizas que crean un paisaje casi lunar. Senderos de dificultad moderada con miradores panorámicos ideales para fotografía al amanecer y atardecer. Recomendado para caminatas de medio día y observación geológica.',
                'assets/mountain1.png'),

                ('Montaña Verde', 'montana',
                'Rodeada de bosques frondosos y praderas, perfecta para senderismo y picnic. Rutas bien señalizadas y zonas de avistamiento de aves; apta para familias y caminantes principiantes. Temporada ideal: primavera y verano.',
                'assets/mountain2.png'),

                ('Montaña Blanca', 'montana',
                'Cumbres con nieves persistentes que ofrecen paisajes espectaculares y actividades invernales. Requiere equipo adecuado para frío y senderos más exigentes; popular entre esquiadores y montañistas. Mejores vistas desde los miradores altos al mediodía.',
                'assets/mountain3.png'),

                ('Montaña Azul', 'montana',
                'Con lagunas cristalinas en la cima y amplias panorámicas que abarcan valles y cumbres lejanas. Ruta recomendada para excursiones de día completo; ideal para fotografía de paisaje y observación de flora alpina. Llevar agua y calzado resistente.',
                'assets/mountain4.png');

            ('Museo Histórico', 'cultura',
                'Exhibiciones sobre la historia local y piezas arqueológicas.',
                'assets/cultura1.png'),

                ('Festival de Música', 'cultura',
                'Evento anual con artistas nacionales e internacionales.',
                'assets/cultura2.png'),

                ('Centro Artesanal', 'cultura',
                'Productos elaborados por artesanos locales.',
                'assets/cultura3.png'),

                ('Danza Folklórica', 'cultura',
                'Presentaciones de bailes típicos con vestimenta tradicional.',
                'assets/cultura4.png');

    incializacio de base de datos 2(experimento):

        create database portalTurismo_db
        use portalTurismo_db
    
        -- ============================================================
        -- 1. TABLA USERS
        -- ============================================================
        CREATE TABLE users (
            id INT PRIMARY KEY AUTO_INCREMENT,
            full_name VARCHAR(100) NOT NULL,
            email VARCHAR(120) UNIQUE NOT NULL,
            password VARCHAR(255) NOT NULL,
            role ENUM('user','admin') DEFAULT 'user',
            created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
        );

        INSERT INTO users (full_name, email, password, role)
        VALUES 
        ('Admin', 'admin@turismo.com', '1234', 'admin'),
        ('Juan Pérez', 'juan@example.com', '1234', 'user'),
        ('María Torres', 'maria@example.com', 'abcd', 'user');

        -- ============================================================
        -- 2. TABLA CATEGORIES
        -- ============================================================
        CREATE TABLE categories (
            id INT PRIMARY KEY AUTO_INCREMENT,
            name VARCHAR(120) UNIQUE NOT NULL,
            description VARCHAR(300),
            image_url VARCHAR(300),
            created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
        );

        INSERT INTO categories (name, description, image_url) VALUES
        ('Playa', 'Playas, arena blanca y actividades acuáticas.', 'assets/playa1.png'),
        ('Montaña', 'Rutas de trekking y paisajes naturales.', 'assets/mountain1.png'),
        ('Cultura', 'Museos, artesanía y festivales culturales.', 'assets/cultura1.png');

        -- ============================================================
        -- 3. TABLA DESTINATIONS (normalizada y moderna)
        -- ============================================================
        CREATE TABLE destinations (
            id INT PRIMARY KEY AUTO_INCREMENT,
            category_id INT NOT NULL,
            location_id INT NULL,

            name VARCHAR(150) NOT NULL,
            slug VARCHAR(180),
            summary VARCHAR(300),
            description TEXT,

            main_image_url VARCHAR(300),
            hero_image_url VARCHAR(300),

            is_featured TINYINT DEFAULT 0,
            created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
            updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,

            FOREIGN KEY (category_id) REFERENCES categories(id) ON DELETE CASCADE
        );

        INSERT INTO destinations 
        (category_id, name, summary, description, main_image_url, hero_image_url, is_featured)
        VALUES
        (1, 'Playa Roja', 'Arena rojiza única', 'Famosa por su arena rojiza dentro de Paracas.', 'assets/playa1.png', 'assets/playa1.png', 1),
        (1, 'La Mina', 'Playa familiar', 'Aguas tranquilas ideales para familia.', 'assets/playa2.png', 'assets/playa2.png', 0),
        (2, 'Montaña Colorada', 'Paisaje rojizo', 'Paisaje alto andino con miradores.', 'assets/mountain1.png', 'assets/mountain1.png', 1),
        (3, 'Museo Histórico', 'Historia local', 'Museo con artefactos históricos.', 'assets/cultura1.png', 'assets/cultura1.png', 0);

        -- ============================================================
        -- 4. TABLA SERVICE_TYPES
        -- ============================================================
        CREATE TABLE service_types (
            id INT PRIMARY KEY AUTO_INCREMENT,
            name VARCHAR(120) NOT NULL,
            icon_url VARCHAR(300)
        );

        INSERT INTO service_types (name) VALUES
        ('Hotel'), ('Restaurante'), ('Tour'), ('Transporte'), ('Actividad'), ('Guía turística');

        -- ============================================================
        -- 5. TABLA SERVICES (servicios turísticos)
        -- ============================================================
        CREATE TABLE services (
            id INT PRIMARY KEY AUTO_INCREMENT,
            service_type_id INT NOT NULL,

            name VARCHAR(150) NOT NULL,
            location VARCHAR(200),
            description TEXT,
            price_range VARCHAR(100),
            image_url VARCHAR(300),

            FOREIGN KEY (service_type_id) REFERENCES service_types(id) ON DELETE CASCADE
        );

        INSERT INTO services (service_type_id, name, location, description, image_url)
        VALUES
        (1, 'Hotel Costa Azul', 'Paracas', 'Hotel frente al mar con piscina.', 'assets/hotel1.png'),
        (2, 'Restaurante El Pez Dorado', 'Paracas', 'Comida marina fresca.', 'assets/rest1.png'),
        (3, 'Tour Islas Ballestas', 'Paracas', 'Tour completo en yate.', 'assets/tour1.png');

        -- ============================================================
        -- 6. TABLA DESTINATION_SERVICES (relación muchos a muchos)
        -- ============================================================
        CREATE TABLE destination_services (
            id INT PRIMARY KEY AUTO_INCREMENT,
            destination_id INT NOT NULL,
            service_id INT NOT NULL,

            UNIQUE(destination_id, service_id),

            FOREIGN KEY (destination_id) REFERENCES destinations(id) ON DELETE CASCADE,
            FOREIGN KEY (service_id) REFERENCES services(id) ON DELETE CASCADE
        );

        INSERT INTO destination_services (destination_id, service_id) VALUES
        (1, 1),
        (1, 2),
        (2, 3);

        -- ============================================================
        -- 7. TABLA EVENTS
        -- ============================================================
        CREATE TABLE events (
            id INT PRIMARY KEY AUTO_INCREMENT,
            destination_id INT NULL,
            service_id INT NULL,
            title VARCHAR(150) NOT NULL,
            description TEXT,
            event_date DATE,
            location VARCHAR(200),
            image_url VARCHAR(255),
            created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,

            FOREIGN KEY (destination_id) REFERENCES destinations(id) ON DELETE SET NULL,
            FOREIGN KEY (service_id) REFERENCES services(id) ON DELETE SET NULL
        );


        INSERT INTO events (destination_id, title, description, event_date)
        VALUES
        (3, 'Festival de Música Andina', 'Artistas regionales e internacionales.', '2025-08-12');

        -- ============================================================
        -- 8. TABLA FAVORITES
        -- ============================================================
        CREATE TABLE favorites (
            id INT PRIMARY KEY AUTO_INCREMENT,
            user_id INT NOT NULL,
            destination_id INT NOT NULL,

            UNIQUE(user_id, destination_id),

            FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
            FOREIGN KEY (destination_id) REFERENCES destinations(id) ON DELETE CASCADE
        );

        -- ============================================================
        -- 9. TABLA EVENTS_FOLLOWED
        -- ============================================================
        CREATE TABLE events_followed (
            id INT PRIMARY KEY AUTO_INCREMENT,
            user_id INT NOT NULL,
            event_id INT NOT NULL,

            UNIQUE(user_id, event_id),

            FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
            FOREIGN KEY (event_id) REFERENCES events(id) ON DELETE CASCADE
        );

        -- ============================================================
        -- 10. Tabla Banners
        -- ============================================================
        CREATE TABLE banners (
            id INT AUTO_INCREMENT PRIMARY KEY,
            image_url VARCHAR(255) NOT NULL,
            title VARCHAR(100) NULL,
            active TINYINT(1) DEFAULT 1,
            sort_order INT DEFAULT 0,
            created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
        );


    cambios bd

    ALTER TABLE services
        ADD COLUMN price_min INT NULL,
        ADD COLUMN price_max INT NULL;

        UPDATE services
        SET price_min = 80, price_max = 100
        WHERE id = 3;

        UPDATE services
        SET price_min = 50, price_max = 90
        WHERE id = 2;

        UPDATE services
        SET price_min = 120, price_max = 180
        WHERE id = 1;

        new services

                -- ============================================================
        -- 5. TABLA SERVICES (servicios turísticos)
        -- ============================================================
        CREATE TABLE services (
                id INT PRIMARY KEY AUTO_INCREMENT,
                service_type_id INT NOT NULL,
                name VARCHAR(255) NOT NULL,
                location VARCHAR(255) NULL,
                description TEXT NULL,
                price_min INT NULL,
                price_max INT NULL,

                image_url VARCHAR(255) NULL,

            FOREIGN KEY (service_type_id) REFERENCES service_types(id) ON DELETE CASCADE
        );

        ALTER TABLE events
            ADD COLUMN image_url VARCHAR(255) NULL AFTER location;
        ALTER TABLE events
ADD COLUMN service_id INT NULL AFTER destination_id;


                -- ============================================================
        -- 7. TABLA EVENTS
        -- ============================================================
        CREATE TABLE events (
            id INT PRIMARY KEY AUTO_INCREMENT,
            destination_id INT NULL,
            service_id INT NULL,
            title VARCHAR(150) NOT NULL,
            description TEXT,
            event_date DATE,
            location VARCHAR(200),
            image_url VARCHAR(255) NULL AFTER location,
            created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,

            FOREIGN KEY (destination_id) REFERENCES destinations(id) ON DELETE SET NULL,
            FOREIGN KEY (service_id) REFERENCES services(id) ON DELETE SET NULL
        );


INSERT INTO events_followed (user_id, event_id) VALUES
(1, 1),  -- Admin sigue el evento
(2, 1),  -- Juan Pérez sigue el evento
(3, 1),  -- María Torres sigue el evento
(4, 1);  -- Juan Luis sigue el evento
